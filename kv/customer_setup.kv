<CustomerSetupScreen>:
    name: 'customer_setup'
    first_name_input: first_name_input
    last_name_input: last_name_input
    email_input: email_input
    phone_input: phone_input
    city_input: city_input
    address_input: address_input
    description_input: description_input
    customer_list: customer_list
    sensor_code_input: sensor_code_input
    sensor_description_input: sensor_description_input
    voltage_sensor: voltage_sensor
    flowmeter_sensor: flowmeter_sensor
    temperature_sensor: temperature_sensor
    ampermeter_sensor: ampermeter_sensor
    sensor_chart: sensor_chart
    floatlayout: floatlayout

    GridLayout:
        cols:3
        canvas.before:
            # Load and scale the background image to fit the screen
            Rectangle:
                source: root.bg_image
                pos: self.pos
                size: self.size
        
        # Foreground content over the background image
        BoxLayout:
            orientation: 'horizontal'
            size_hint_x: 0.7  # Occupy 1/3 of the screen width
            pos_hint: {'x': 0}
            padding: 10
            canvas.before:
                Rectangle:
                    size: (self.width * 1, self.height * 0.72)  
                    pos: (self.x - self.width * 0.01, self.y + self.height * 0.3) 
                    source: root.frame_image
            FloatLayout:
                # Background Label for the top image
                canvas.before:
                    Rectangle:
                        source: root.label_image
                        size: (self.width * 0.6, self.height * 0.1)
                        pos: (self.center_x - (self.width * 0.15), self.top - (self.height * 0.1))

                # Customer Registration Form
                BoxLayout:
                    orientation: 'vertical'
                    size_hint_x: 0.9
                    pos_hint: {'center_x': 0.5, 'top': .9}
                    GridLayout:
                        cols: 2
                        size_hint_y: .5
                        Image:
                            size_hint_x: .7
                            source: root.l_name
                        TextInput:
                            write_tab: False
                            size_hint_x: 1.7
                            id: first_name_input
                            font_size: self.height * 0.5
                        Image:
                            size_hint_x: .7
                            source: root.l_lastname
                        TextInput:
                            write_tab: False
                            size_hint_x: 1.7
                            id: last_name_input
                            font_size: self.height * 0.5
                        Image:
                            size_hint_x: .7
                            source: root.l_email
                        TextInput:
                            write_tab: False
                            size_hint_x: 1.7
                            id: email_input
                            font_size: self.height * 0.5
                        Image:
                            size_hint_x: .7
                            source: root.l_phone
                        TextInput:
                            write_tab: False
                            size_hint_x: 1.7
                            id: phone_input
                            font_size: self.height * 0.5
                        Image:
                            size_hint_x: .7
                            source: root.l_city
                        TextInput:
                            write_tab: False
                            size_hint_x: 1.7
                            id: city_input
                            font_size: self.height * 0.5
                        Image:
                            size_hint_x: .7
                            source: root.l_address
                        TextInput:
                            write_tab: False
                            size_hint_x: 1.7
                            id: address_input
                            font_size: self.height * 0.5
                        Image:
                            size_hint_x: .7
                            source: root.l_describe
                        TextInput:
                            write_tab: False
                            size_hint_x: 1.7
                            size_hint_y: 4
                            id: description_input
                            font_size: self.height * 0.12
                        Label:
                            size_hint_x: .7
                            text: ""
                        Button:
                            size_hint_x: .6
                            size_hint_y: 3
                            text: 'Register Customer'
                            font_size: self.width / 12
                            background_normal: root.b_n
                            background_down: root.b_d
                            on_release: root.register_customer()
                            pos_hint: {"x": 1}
                    
                    FloatLayout:
                        id: floatlayout
                        size_hint_y: .35
                        anchor_x: "left"
                        anchor_y: "bottom"
                        Button:
                            font_size: self.width / 12
                            background_normal: root.b_n
                            background_down: root.b_d
                            on_release: root.manager.current = 'first_menu'
                            text: "Back to Main Menu"
                            size_hint_x: .6
                            size_hint_y: 0.25
                            pos_hint: {'top': 0.47}
        #---------------------------------------------- # Customer List # ----------------------------------------
        BoxLayout:
            canvas.before:
                Rectangle:
                    source: root.pngwing_image
                    size: (self.width * 1, self.height * 1.1) 
                    pos: (self.x - self.width * 0.02, self.y - self.height * 0.05) 

            orientation: 'vertical'
            size_hint_x: .6
            size_hint_y: .6

            Label:
                size_hint_y: .04
                text: ""
            Label:
                size_hint_x: .5
                size_hint_y: .05
                text: 'Customer List'
                color: 0, 0, 0
                pos_hint: {"x": .25}

            ScrollView:
                size_hint: (1, 1)

                BoxLayout:
                    id: customer_list
                    orientation: 'vertical'
                    size_hint_y: None
                    height: self.minimum_height
            ScrollView:
                size_hint: (1, 1)    
                BoxLayout:
                    id: sensor_chart
                    orientation: 'vertical'
                    padding: (45,0,90,0)
                    size_hint_y: .99
            Label:
                size_hint_y: .1
                text:'' # empty space

        #------------------------------------------------# Sensor Setup Form #----------------------------------------
        BoxLayout:
            # Wrapper for the Sensor Setup Form with background image
            size_hint_x: 0.7
            padding: 5
            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1 
                Rectangle:
                    size: (self.width * 1.038, self.height * 0.75)
                    pos: (self.x - self.width * 0.06, self.y + self.height * 0.258)  
                    source: root.frame_image   # Frame image

            BoxLayout:     
                orientation: 'vertical'
                padding: 1
                spacing: 1

                Image:
                    source: root.label_sensor
                    pos_hint: {"x": -0.25}

                Image:
                    size_hint_y: 3.5
                    source: root.label_sensor_list
                    pos_hint: {"x": -0.28}

                Image:
                    size_hint_y: 0.7
                    source: root.label_sensor_code
                    pos_hint: {"x": -0.38}

                TextInput:
                    write_tab: False
                    id: sensor_code_input
                    size_hint_y: 0.7
                    size_hint_x: 0.9
                    multiline: False

                Image:
                    size_hint_y: 0.7
                    source: root.label_description
                    pos_hint: {"x": -0.38}

                TextInput:
                    write_tab: False
                    id: sensor_description_input
                    size_hint_y: 2
                    size_hint_x: 0.9
                    multiline: True

                Image:
                    size_hint_y: 0.7
                    source: root.label_sensor_type
                    pos_hint: {"x": -0.38}

                BoxLayout: 
                    size_hint_y: 2.5  # Sensors images
                    orientation: 'horizontal'
                    spacing: 5
                    padding: 5

                    BoxLayout:
                        orientation: 'vertical'
                        Image:
                            source: root.sensor1_image
                        CheckBox:
                            on_active: root.sensors_type(self,  self.active, "voltmeter")
                            id: voltage_sensor
                            group: 'sensor'

                    BoxLayout:
                        orientation: 'vertical'
                        Image:
                            source: root.sensor2_image
                        CheckBox:
                            on_active: root.sensors_type(self,  self.active, "flowmeter")
                            id: flowmeter_sensor
                            group: 'sensor'

                    BoxLayout:
                        orientation: 'vertical'
                        Image:
                            source: root.sensor3_image
                        CheckBox:
                            on_active: root.sensors_type(self,  self.active, "temperature")
                            id: temperature_sensor
                            group: 'sensor'

                    BoxLayout:
                        orientation: 'vertical'
                        Image:
                            source: root.sensor4_image
                        CheckBox:
                            on_active: root.sensors_type(self,  self.active, "ampermeter")
                            id: ampermeter_sensor
                            group: 'sensor'

                BoxLayout:
                    size_hint_y: 1.4
                    padding: [130 - self.width * 0.05, 0, 0, 0]  
                    Button:
                        size_hint_x: 0.2
                        text: "Save Sensor"
                        font_size: self.width / 14
                        background_normal: root.button_bg_normal
                        background_down: root.button_bg_down
                        on_release: root.save_sensor()
