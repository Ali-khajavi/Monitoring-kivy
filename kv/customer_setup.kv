<CustomerSetupScreen>:
    name: 'customer_setup'
    first_name_input: first_name_input
    last_name_input: last_name_input
    email_input: email_input
    phone_input: phone_input
    city_input: city_input
    address_input: address_input
    description_input: description_input
    customer_list: customer_list
    sensor_code_input: sensor_code_input
    sensor_description_input: sensor_description_input
    voltage_sensor: voltage_sensor
    flowmeter_sensor: flowmeter_sensor
    temperature_sensor: temperature_sensor
    ampermeter_sensor: ampermeter_sensor

    GridLayout:
        cols:3
        canvas.before:
            # Load and scale the background image to fit the screen
            Rectangle:
                source: 'assets/BG1.jpg'
                pos: self.pos
                size: self.size
        
        # Foreground content over the background image
        BoxLayout:
            orientation: 'horizontal'
            size_hint_x: 0.7  # Occupy 1/3 of the screen width
            pos_hint: {'x': 0}
            padding: 10
            canvas.before:
                Rectangle:
                    size: (self.width * 1, self.height * 0.72)  
                    pos: (self.x - self.width * 0.01, self.y + self.height * 0.3) 
                    source: 'assets/F1.png'  # Frame image
            FloatLayout:
                # Background Label for the top image
                canvas.before:
                    Rectangle:
                        source: 'assets/Labels/Form-Label.png'
                        size: (self.width * 0.6, self.height * 0.1)
                        pos: (self.center_x - (self.width * 0.15), self.top - (self.height * 0.1))

                # Customer Registration Form
                BoxLayout:
                    orientation: 'vertical'
                    size_hint_x: 0.9
                    pos_hint: {'center_x': 0.5, 'top': .9}
                    GridLayout:
                        cols: 2
                        size_hint_y: .5
                        Image:
                            size_hint_x: .7
                            source: 'assets/Labels/B1-Name.png'
                        TextInput:
                            write_tab: False
                            size_hint_x: 1.7
                            id: first_name_input
                            font_size: self.height * 0.5
                        Image:
                            size_hint_x: .7
                            source: 'assets/Labels/B2-Last-Name.png'
                        TextInput:
                            write_tab: False
                            size_hint_x: 1.7
                            id: last_name_input
                            font_size: self.height * 0.5
                        Image:
                            size_hint_x: .7
                            source: 'assets/Labels/B3-Email.png'
                        TextInput:
                            write_tab: False
                            size_hint_x: 1.7
                            id: email_input
                            font_size: self.height * 0.5
                        Image:
                            size_hint_x: .7
                            source: 'assets/Labels/B4-Phone.png'
                        TextInput:
                            write_tab: False
                            size_hint_x: 1.7
                            id: phone_input
                            font_size: self.height * 0.5
                        Image:
                            size_hint_x: .7
                            source: 'assets/Labels/B5-City.png'
                        TextInput:
                            write_tab: False
                            size_hint_x: 1.7
                            id: city_input
                            font_size: self.height * 0.5
                        Image:
                            size_hint_x: .7
                            source: 'assets/Labels/B6-Address.png'
                        TextInput:
                            write_tab: False
                            size_hint_x: 1.7
                            id: address_input
                            font_size: self.height * 0.5
                        Image:
                            size_hint_x: .7
                            source: 'assets/Labels/B7-Description.png'
                        TextInput:
                            write_tab: False
                            size_hint_x: 1.7
                            size_hint_y: 4
                            id: description_input
                            font_size: self.height * 0.12
                        Label:
                            size_hint_x: .7
                            text: ""
                        Button:
                            size_hint_x: .6
                            size_hint_y: 3
                            text: 'Register Customer'
                            font_size: self.width / 12
                            background_normal: 'assets/PNG/Button_1/b2.png'
                            background_down: 'assets/PNG/Button_1/b4.png'
                            on_release: root.register_customer()
                            pos_hint: {"x": 1}
                    
                    FloatLayout:
                        size_hint_y: .35
                        anchor_x: "left"
                        anchor_y: "bottom"
                        Button:
                            font_size: self.width / 12
                            background_normal: 'assets/PNG/Button_1/b2.png'
                            background_down: 'assets/PNG/Button_1/b4.png'
                            on_release: root.manager.current = 'first_menu'
                            text: "Back to Main Menu"
                            size_hint_x: .6
                            size_hint_y: 0.25
                            pos_hint: {'top': 0.47}
        #---------------------------------------------- # Customer List # ----------------------------------------
        BoxLayout:
            canvas.before:
                Rectangle:
                    size: (self.width * .9, self.height * 0.72) 
                    pos: (self.x + self.width * 0.03, self.y + self.height * 0.27)  
                    source: 'assets/Customer-List2-open.png'  # Frame image
            orientation: 'vertical'
            size_hint_x: .6
            size_hint_y: 1

            Label:
                size_hint_y: .09
                text: ""

            Label:
                size_hint_x: .5
                size_hint_y: .05
                text: 'Customer List'
                color: 0, 0, 0
                pos_hint: {"x": .25}

            ScrollView:
                size_hint: (1, 1)
                height: 300

                BoxLayout:
                    id: customer_list
                    orientation: 'vertical'
                    size_hint_y: None
                    height: self.minimum_height

                    # This will be populated with ToggleButtons dynamically from your Python code


        #------------------------------------------------# Sensor Setup Form #----------------------------------------
        BoxLayout:
            # Wrapper for the Sensor Setup Form with background image
            size_hint_x: 0.7
            padding: 5
            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1 
                Rectangle:
                    size: (self.width * 1.038, self.height * 0.75)
                    pos: (self.x - self.width * 0.06, self.y + self.height * 0.258)  
                    source: 'assets/F1.png'  # Frame image

            BoxLayout:     
                orientation: 'vertical'
                padding: 1
                spacing: 1

                Image:
                    source: 'assets/Labels/Label-sensor.png'
                    pos_hint: {"x": -0.25}

                Image:
                    size_hint_y: 3.5
                    source: 'assets/Labels/Label-sensor-lisens.png'
                    pos_hint: {"x": -0.28}

                Image:
                    size_hint_y: 0.7
                    source: 'assets/Labels/Sensor-Code.png'
                    pos_hint: {"x": -0.38}

                TextInput:
                    write_tab: False
                    id: sensor_code_input
                    size_hint_y: 0.7
                    size_hint_x: 0.9
                    multiline: False

                Image:
                    size_hint_y: 0.7
                    source: 'assets/Labels/B7-Description.png'
                    pos_hint: {"x": -0.38}

                TextInput:
                    write_tab: False
                    id: sensor_description_input
                    size_hint_y: 2
                    size_hint_x: 0.9
                    multiline: True

                Image:
                    size_hint_y: 0.7
                    source: 'assets/Labels/Sensor-type.png'
                    pos_hint: {"x": -0.38}

                BoxLayout: 
                    size_hint_y: 2.5  # Sensors images
                    orientation: 'horizontal'
                    spacing: 5
                    padding: 5

                    BoxLayout:
                        orientation: 'vertical'
                        Image:
                            source: 'assets/sensor1.png'
                        CheckBox:
                            id: voltage_sensor
                            group: 'sensor'

                    BoxLayout:
                        orientation: 'vertical'
                        Image:
                            source: 'assets/sensor2.png'
                        CheckBox:
                            id: flowmeter_sensor
                            group: 'sensor'

                    BoxLayout:
                        orientation: 'vertical'
                        Image:
                            source: 'assets/sensor3.png'
                        CheckBox:
                            id: temperature_sensor
                            group: 'sensor'

                    BoxLayout:
                        orientation: 'vertical'
                        Image:
                            source: 'assets/sensor4.png'
                        CheckBox:
                            id: ampermeter_sensor
                            group: 'sensor'

                BoxLayout:
                    size_hint_y: 1.4
                    padding: [130 - self.width * 0.05, 0, 0, 0]  
                    Button:
                        size_hint_x: 0.2
                        text: "Save Sensor"
                        font_size: self.width / 14
                        background_normal: 'assets/PNG/Button_1/b2.png'
                        background_down: 'assets/PNG/Button_1/b4.png'
                        on_release: root.save_sensor()


